# WiseMed-SmartLink 项目全方位指南

## 1. 项目架构解析 (Project Architecture)

本项目采用 **云边协同 (Cloud-Edge Collaboration)** 的微服务架构，旨在为基层医疗机构提供 AI 辅助诊断、多语言翻译及 SaaS 服务。

### 核心架构分层
1.  **前端应用层 (Frontend)**
    *   **Web Console**: 基于 Next.js 开发的统一管理平台，提供仪表盘、诊所管理、影像查看器等功能。
2.  **业务服务层 (Business Services)**
    *   **`auth-service`**: 统一认证服务，基于 Keycloak，支持 OIDC/OAuth2，管理医生、护士及管理员权限。
    *   **`ai-infer-service`**: AI 推理服务，集成 **MONAI DenseNet121** 模型，负责肺结节检测等影像分析任务 (已实装真实推理)。
    *   **`translation-service`**: 医疗翻译服务，集成 **HuggingFace Transformers (NMT)** 和 **Whisper (ASR)**，解决医患语言障碍 (已实装真实翻译)。
    *   **`pacs-gw-service`**: 影像网关，对接 Orthanc (PACS服务器)，处理 DICOM 文件的上传、存储与路由。
3.  **基础设施层 (Infrastructure)**
    *   **消息总线**: Redpanda (兼容 Kafka)，用于服务间异步通信（如：`exam.created` 检查创建事件）。
    *   **数据存储**: PostgreSQL (关系型数据), MinIO (对象存储/模型权重), Orthanc (DICOM 存储)。
    *   **可观测性**: Prometheus + Grafana，用于监控推理延迟、服务健康度及业务指标。

### 部署形态
*   **边缘端 (Edge)**: 部署在 RK3588 等边缘盒子上，运行轻量级网关、缓存及离线 AI 推理。
*   **云端/中心端 (Cloud)**: 运行全量服务、模型训练/更新、数据归档及 SaaS 业务逻辑。

---

## 2. 商业化落地路径 (Commercialization Strategy)

建议采用 **"硬件+SaaS+增值服务"** 的混合商业模式：

1.  **软硬一体化销售 (AI Box)**
    *   **产品**: 预装 WiseMed 系统的边缘计算盒子 (如基于 RK3588)。
    *   **卖点**: 开箱即用，无需复杂部署，支持离线 AI 诊断，保护患者隐私。
    *   **客户**: 乡镇卫生院、社区诊所、体检中心。

2.  **SaaS 订阅服务 (Subscription)**
    *   **基础版**: 免费或低价，包含基础 EMR (电子病历)、库存管理功能。
    *   **专业版**: 按年付费，包含 AI 影像辅助诊断（不限次）、远程专家会诊接口。

3.  **按量付费 (Pay-per-Use)**
    *   **医疗翻译**: 针对方言复杂的地区，按翻译时长或会话次数收费。
    *   **高级 AI 分析**: 针对疑难杂症的云端大模型深度分析，按次收费。

4.  **数据与API合作**
    *   向第三方 HIS 厂商开放 API，提供 AI 诊断与方言翻译能力，收取接口调用费。

---

## 3. 文档编写体系 (Documentation Guide)

建议构建三层文档体系：

### A. 最终用户手册 (User Manual) - *面向医生/护士*
*   **快速入门**: 登录、界面概览、密码修改。
*   **核心流程**:
    *   **患者接诊**: 录入信息、开启方言翻译。
    *   **影像诊断**: 上传 DICOM、查看 AI 标注、生成报告。
    *   **诊所管理**: 药品出入库、库存预警。
*   **常见问题 (FAQ)**: 操作疑难解答。

### B. 管理员与运维指南 (Admin & Ops Guide) - *面向IT人员*
*   **部署指南**: 硬件规格、Docker Compose 一键部署 (`make compose-up`)。
*   **配置管理**: Keycloak 用户管理、PACS 系统对接。
*   **监控排查**: Grafana 面板使用、日志导出与分析。

### C. 开发者文档 (Developer Docs) - *面向二次开发者*
*   **API 参考**: Swagger/OpenAPI 接口文档。
*   **架构白皮书**: 设计理念、数据流向、SaMD 合规性说明。

---

## 4. 能力展示方案 (Capability Demonstration)

### 场景一：智能影像诊断闭环
*   **操作**: 上传匿名肺部 CT 影像。
*   **展示**: 系统秒级识别结节，高亮显示位置，预测良恶性概率，生成结构化报告。
*   **核心价值**: **AI 速度** 与 **可视化体验**。

### 场景二：方言无障碍问诊
*   **操作**: 模拟医生与方言患者对话（如衡水话）。
*   **展示**: 实时显示方言转文字 (ASR) 及标准医学术语翻译。
*   **核心价值**: **多语言沟通** 与 **术语准确性**。

### 场景三：基层诊所全流程管理
*   **操作**: 演示 挂号 -> 问诊 -> 开药 -> 结算 全流程。
*   **展示**: 仪表盘实时跳动的数据，药品库存的自动预警。
*   **核心价值**: **SaaS 易用性** 与 **数据驱动管理**。

---

## 5. 全流程实操手册 (Full Process Operation)

### 第一步：环境准备与启动
1.  **代码准备**: 确保项目代码完整。
2.  **初始化**: 运行 `make setup` 安装依赖。
3.  **启动服务**: 运行 `make compose-up` 启动所有 Docker 容器 (Web, AI, DB, Kafka 等)。

### 第二步：系统登录
1.  访问 `http://localhost:3001`。
2.  使用管理员账号登录：
    *   用户名: `admin`
    *   密码: `admin`

### 第三步：功能体验
1.  **仪表盘**: 查看系统概览。
2.  **智能影像**: 点击 "Smart Imaging"，上传 DICOM 文件，查看 AI 分析结果。
3.  **全球诊所**: 点击 "Global Clinic"，体验患者管理与库存功能。

### 第四步：监控与运维
1.  访问 `http://localhost:3000` (Grafana)，账号 `admin`/`admin`。
2.  查看系统资源、API 延迟等监控指标。
3.  使用 `docker compose ps` 查看容器状态。

### 第五步：环境清理
*   测试结束后，运行 `make compose-down` 停止服务。
